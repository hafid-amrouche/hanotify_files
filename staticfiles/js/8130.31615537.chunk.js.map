{"version":3,"file":"static/js/8130.31615537.chunk.js","mappings":"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","sources":["webpack://hanotify-store/./src/components/BuyButton.module.css?8862","components/BuyButton.jsx","pages/product-page/store/product-context.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"button\":\"BuyButton_button__Litak\",\"outline\":\"BuyButton_outline__bdUdp\",\"disabled\":\"BuyButton_disabled__okQ++\"};","import React from 'react'\r\nimport classes from './BuyButton.module.css'\r\nconst BuyButton = ({children, className, onClick, disabled, outline, ...props}) => {\r\n  return (\r\n    <div disabled={disabled} className={`${outline ? classes['outline'] : ''} ${classes.button} ${className} ${ disabled ? classes.disabled : ''}`} {...props} onClick={disabled ? undefined : onClick} >{children}</div>\r\n  )\r\n}\r\n\r\nexport default BuyButton","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport { createContext } from \"react\";\r\nimport { filesUrl } from '../../../constants/Urls';\r\nimport {Outlet, useNavigate, useParams} from 'react-router-dom'\r\nimport states from '../../../json/states.json'\r\nimport { translaste } from '../../../utils/utils';\r\nimport BuyButton from '../../../components/BuyButton';\r\nimport { useStoreContext } from '../../../store/store-context';\r\n\r\nconst defaultProductData = {\r\n    productId: null,\r\n    title: '',\r\n    slug: '',\r\n    miniDescription: '',\r\n    galleryImages: [],\r\n    selectedCategories: [],\r\n    price: 0,\r\n    originalPrice: 0,\r\n    discount: '',\r\n    shippingCostByState: [] ,\r\n    variants: {},\r\n    pricesAndImagesList: [],\r\n    combinationIndex: 0,\r\n    richText: '',\r\n    relatedProducts: [],\r\n    allProductsRelated: false,\r\n  }\r\nconst ProductContext = createContext({\r\n    productData: defaultProductData,\r\n    setProductData: ()=>{},\r\n    currentImage: null,\r\n    setCurrentImage: ()=>{},\r\n})\r\n\r\n\r\nconst ProductContextProviderInner=()=>{\r\n    const [productData, setProductData] = useState(defaultProductData)\r\n    const [error, setError] = useState(false)\r\n    const [currentImage, setCurrentImage] = useState(null)\r\n    const {id: productId} = useParams()\r\n\r\n    const {language} = useStoreContext()\r\n    const lang_prefix = language === 'ar' ? '_ar': '' \r\n\r\n    const {storeData} = useStoreContext()\r\n    useEffect(()=>{\r\n      const fetchProduct=async()=>{\r\n        setError(false)\r\n        try{\r\n          let data;\r\n          if (window.productData){\r\n            data = window.productData\r\n          }\r\n          else{\r\n            const response = await fetch(\r\n              filesUrl + `/get-product?product_id=${productId}`,\r\n              {\r\n                method: 'get'\r\n              }\r\n            )\r\n            if (!response.ok) {\r\n              console.log(`Error: ${response.status} ${response.statusText}`);\r\n              setError(true)\r\n              return;\r\n            }\r\n          \r\n            data = await response.json()\r\n          }\r\n\r\n\r\n          let shippingCostByState = data.useDefaultShipping ? storeData.defaultShippigCosts : data.shippingCostByState\r\n          shippingCostByState = shippingCostByState.map(cost=>{\r\n            const state = states.find(state=>state.id === cost.id)\r\n            return({\r\n                ...cost,\r\n                cost: cost.cost,\r\n                costToHome: cost.costToHome,\r\n                label: `${state.code} - ${state['name' + lang_prefix]}`,\r\n            })\r\n          })\r\n          \r\n          data.galleryImages = [...(data.galleryImages || []), ...[data.pricesAndImagesList?.map(row=>row.image).filter(img=>!!img) || []]]\r\n          setProductData(productData=>({\r\n              ...productData,\r\n              ...data,\r\n              shippingCostByState: shippingCostByState,\r\n          }))\r\n          if(data.galleryImages?.length > 0) setCurrentImage({\r\n            id:0,\r\n            url:data.galleryImages[0]\r\n          })\r\n          // SEO\r\n          document.title = data.title || 'Hanotify'\r\n          document.querySelector('#meta-title').setAttribute('content', data.title || 'Hanotify')\r\n\r\n          document.querySelector('#meta-image').setAttribute('content', document.querySelector('#meta-image').getAttribute('content') || (data.galleryImages ? data.galleryImages[0] : ''))\r\n\r\n          document.querySelector('#description').setAttribute('content',  data.miniDescription || document.querySelector('#description').getAttribute('content'))\r\n          document.querySelector('#meta-descrition').setAttribute('content', data.miniDescription  || document.querySelector('#meta-descrition').getAttribute('content'))\r\n        }\r\n        catch(error){\r\n          console.log(error)\r\n        }              \r\n      }\r\n      fetchProduct()\r\n      return ()=>{window.productData = undefined}\r\n    }, [])\r\n    \r\n    \r\n    useEffect(() => {\r\n      // Dynamically import CSS based on the theme\r\n      const loadRichTextCss = async () => {\r\n        if (productData?.richText) {\r\n          await import('../../../css/suneditor-contents.css');\r\n        }\r\n      };\r\n  \r\n      loadRichTextCss();\r\n    }, [productData]);\r\n\r\n    const setCurrentImageWithImagesCount=(func)=>{\r\n      let newState;\r\n      if (typeof func === '' ) {\r\n        newState = func(productData.galleryImages.length)\r\n      }\r\n      else {\r\n        newState = func\r\n      }\r\n      setCurrentImage(func)\r\n    }\r\n\r\n    const navigate = useNavigate()\r\n\r\n\r\n    const swiperRef = useRef()\r\n    \r\n    const defaultValue = {\r\n      productData,\r\n      setProductData,\r\n      currentImage,\r\n      setCurrentImage: setCurrentImageWithImagesCount,\r\n      swiperRef\r\n    }\r\n\r\n    useEffect(()=>{\r\n      if (productData.combinationIndex >= 0){\r\n        const image =  productData.pricesAndImagesList[productData.combinationIndex]?.image\r\n        if (image) {\r\n          const imageIndex = productData.galleryImages.indexOf(image)\r\n          if (imageIndex >= 0)  swiperRef.current?.swiper.slideTo(imageIndex)\r\n          swiperRef.current?.swiper.slideTo(imageIndex)\r\n        }\r\n      }\r\n    }, [productData.combinationIndex])\r\n    return (\r\n      <ProductContext.Provider value={defaultValue}>\r\n          { productData.productId && <Outlet/>}\r\n          { error && <div className='flex-1 d-flex flex-column gap-2 align-items-center justify-content-center' style={{minHeight: 500, width: '100%'}} >\r\n            <h2 className='color-red'>{ translaste('Wrong link') }</h2>\r\n            <BuyButton outline className='d-flex gap-3' onClick={()=>navigate('/')}>\r\n              <i className='fa-solid fa-chevron-left'></i>\r\n              {translaste('Go back to store')}\r\n            </BuyButton>\r\n          </div> }\r\n      </ProductContext.Provider>\r\n    )\r\n}\r\n\r\nconst ProductContextProvider=()=>{\r\n  const {id: productId} = useParams()\r\n  return <ProductContextProviderInner key={productId} />\r\n}\r\n\r\nexport default ProductContextProvider\r\nexport const useProductContext =()=> useContext(ProductContext)"],"names":["_ref","children","className","onClick","disabled","outline","props","_jsx","concat","classes","undefined","defaultProductData","productId","title","slug","miniDescription","galleryImages","selectedCategories","price","originalPrice","discount","shippingCostByState","variants","pricesAndImagesList","combinationIndex","richText","relatedProducts","allProductsRelated","ProductContext","createContext","productData","setProductData","currentImage","setCurrentImage","ProductContextProviderInner","useState","error","setError","id","useParams","language","useStoreContext","lang_prefix","storeData","useEffect","async","_data$pricesAndImages","_data$galleryImages","data","window","response","fetch","filesUrl","method","ok","console","log","status","statusText","json","useDefaultShipping","defaultShippigCosts","map","cost","state","states","find","costToHome","label","code","row","image","filter","img","length","url","document","querySelector","setAttribute","getAttribute","fetchProduct","loadRichTextCss","navigate","useNavigate","swiperRef","useRef","defaultValue","func","newState","_productData$pricesAn","_swiperRef$current","_swiperRef$current2","imageIndex","indexOf","current","swiper","slideTo","_jsxs","Provider","value","Outlet","style","minHeight","width","translaste","BuyButton","ProductContextProvider","useProductContext","useContext"],"sourceRoot":""}