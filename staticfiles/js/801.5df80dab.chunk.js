"use strict";(self.webpackChunkhanotify_store=self.webpackChunkhanotify_store||[]).push([[801],{1874:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var i=s(5043),r=s(4014),c=s(3216),n=s(4286),a=s(149),o=s(4346),l=s(662),d=s(579);const m={productId:null,title:"",slug:"",miniDescription:"",galleryImages:[],selectedCategories:[],price:0,originalPrice:0,discount:"",shippingCostByState:[],variants:{},variantsCombinations:[],pricesAndImagesList:[],combinationIndex:0,richText:"",relatedProducts:[],allProductsRelated:!1},u=(0,i.createContext)({productData:m,setProductData:()=>{},currentImage:null,setCurrentImage:()=>{}}),p=e=>{let{children:t}=e;const[p,x]=(0,i.useState)(m),[h,g]=(0,i.useState)(!1),[v,j]=(0,i.useState)(null),{id:f}=(0,c.g)(),{language:y}=(0,l.o)(),b="ar"===y?"_ar":"";(0,i.useEffect)((()=>{(async()=>{g(!1);try{var e;let t=window.productData;if(!t){const e=await fetch(r.$f+"/files/get-product?product_id=".concat(f),{method:"get"});if(!e.ok)return console.log("Error: ".concat(e.status," ").concat(e.statusText)),void g(!0);t=await e.json()}let s=t;delete window.productData;let i=s.shippingCostByState;i=i.length>0?i.map((e=>{const t=n.find((t=>t.id===e.id));return{...e,cost:e.cost,costToHome:e.costToHome,label:"".concat(t.code," - ").concat(t["name"+b])}})):n.map((e=>({cost:0,costToHome:0,label:"".concat(e.code," - ").concat(e["name"+b]),id:e.id}))),s={...s,shippingCostByState:i},x((e=>({...e,...s}))),(null===(e=s.galleryImages)||void 0===e?void 0:e.length)>0&&j({id:0,url:s.galleryImages[0]})}catch(h){console.log(h)}})()}),[]),(0,i.useEffect)((()=>{(async()=>{null!==p&&void 0!==p&&p.richText&&await s.e(1568).then(s.bind(s,1568))})()}),[p]);const N={productData:p,setProductData:x,currentImage:v,setCurrentImage:e=>{let t;t=""===typeof e?e(p.galleryImages.length):e,j(e)}},_=(0,c.Zp)();return(0,d.jsxs)(u.Provider,{value:N,children:[p.productId&&t,h&&(0,d.jsxs)("div",{className:"flex-1 d-flex flex-column gap-2 align-items-center justify-content-center",style:{minHeight:500,width:"100%"},children:[(0,d.jsx)("h2",{className:"color-red",children:(0,a.cv)("Wrong link")}),(0,d.jsxs)(o.A,{outline:!0,className:"d-flex gap-3",onClick:()=>_("/"),children:[(0,d.jsx)("i",{className:"fa-solid fa-chevron-left"}),(0,a.cv)("Go back to store")]})]})]})},x=()=>(0,i.useContext)(u),h=e=>{let{children:t,...s}=e;const[r,c]=(0,i.useState)(!1),n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=()=>{if(n.current){n.current.getBoundingClientRect().bottom<window.innerHeight+20&&c(!0)}};return window.addEventListener("scroll",e),window.addEventListener("resize",e),e(),r&&(window.removeEventListener("scroll",e),window.removeEventListener("resize",e)),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[r]),(0,d.jsx)("div",{ref:n,...s,children:r?t:null})},g=(0,i.memo)((()=>{const{currentImage:e,setCurrentImage:t,productData:s}=x(),{galleryImages:r}=s,c=r.map(((e,t)=>({url:e,id:t}))),[n,a]=(0,i.useState)(!1);(0,i.useEffect)((()=>{n?(document.getElementById("image-slider__container").classList.remove("p-sticky-md"),document.documentElement.style.overflow="hidden"):(document.getElementById("image-slider__container").classList.add("p-sticky-md"),document.documentElement.style.removeProperty("overflow"))}),[n]);const{language:o}=(0,l.o)(),m="ar"===o;return(0,d.jsxs)("div",{id:"image-slider",className:"image-slider ".concat(n?"fullscreen":""),children:[(0,d.jsxs)("div",{className:"slides",children:[(0,d.jsx)(h,{className:"slide cursor-pointer ".concat(n?"full-screen-image":""),style:{backgroundImage:"url(".concat(e.url,")")},onClick:()=>a(!0),id:"gallery-image-container"}),(0,d.jsx)("button",{className:m?" next":"prev",onClick:()=>{let s=(c.findIndex((t=>t.id===e.id))+c.length-1)%c.length;t(c[s])},children:"\u276e"}),(0,d.jsx)("button",{className:m?" prev":"next",onClick:()=>{const s=(c.findIndex((t=>t.id===e.id))+1)%c.length;t(c[s])},children:"\u276f"}),(0,d.jsx)("i",{className:(n?"fa-solid fa-expand":"fa-solid fa-compress")+" fullscreen-btn",onClick:()=>{a((e=>!e))}})]},e.url),(0,d.jsx)("div",{className:"dots d-flex flex-nowrap overflow-x-auto",children:c.map((s=>(0,d.jsx)("div",{className:"".concat(s.id===e.id?"active":""),style:{borderRadius:"var(--border-radius-1)"},children:(0,d.jsx)(h,{children:(0,d.jsx)("span",{className:"dot",onClick:()=>{return e=s.id,void t(c.find((t=>t.id===e)));var e},style:{backgroundImage:"url(".concat(s.url,")")}})})},s.id)))})]})})),v="ImageOptions_container__PTVV-",j="ImageOptions_image__8x3vU",f="ImageOptions_image-container__BuDEn",y="ImageOptions_selected__L-kY1",b=e=>{let{src:t,alt:s,placeholder:r,className:c,...n}=e;const[a,o]=(0,i.useState)(!1),[l,m]=(0,i.useState)(!1),u=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(o(!0),e.disconnect())}))}),{root:null,rootMargin:"0px",threshold:.1});return u.current&&e.observe(u.current),a&&e.unobserve(u.current),()=>{e&&u.current&&e.unobserve(u.current)}}),[]),(0,d.jsx)("img",{src:a?t:r,alt:s,onLoad:()=>m(!0),className:"".concat(c," ").concat(l?"loaded":"loading"),...n,ref:u})},N=e=>{let{options:t,setSelectedImageOption:s,selectedImageOption:i}=e;const{setCurrentImage:r}=x(),c=e=>{s(e),r((t=>({id:t,url:e.image})));document.documentElement};return(0,d.jsx)("div",{className:v,children:t.map((e=>(0,d.jsx)("div",{className:"".concat(f," ").concat(i.id===e.id?y:void 0),children:(0,d.jsx)(b,{src:e.image,className:j,onClick:c.bind(void 0,e)})},e.id)))})},_="TextOptions_text__IuLOK",I="TextOptions_selected__cijci",w="TextOptions_container__Zz2zB",O=e=>{let{options:t,selectedTextOption:s,setSelectedTextOption:i}=e;return(0,d.jsx)("div",{className:w,children:t.map((e=>(0,d.jsx)("p",{className:"".concat(_," ").concat(s.id===e.id?I:""),onClick:()=>i(e),children:e.label},e.id)))})},C="CircleOptions_container__dfTae",k="CircleOptions_circle__PAi5B",S="CircleOptions_selected__tbdXZ",E=e=>{let{options:t,selectedCCOption:s,setSelectedCCOption:i}=e;return(0,d.jsx)("div",{className:C,children:t.map((e=>(0,d.jsx)("div",{className:s.id===e.id?S:void 0,children:(0,d.jsx)("div",{className:"".concat(k),style:{backgroundColor:e.color},onClick:()=>i(e)})},e.id)))})};var D=s(5429);const T="RadioInputs_radio__kT0L-",P=e=>{let{className:t,name:s,options:i,selectedRadioOption:r,setSelectedRadioOption:c,...n}=e;console.log(r);return(0,d.jsx)("div",{children:i.map((e=>(0,d.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,d.jsx)("input",{className:"".concat(t||""," ").concat(T),...n,type:"radio",name:s,id:s+e.id,checked:r.id===e.id,onChange:()=>(e=>{c(e)})(e)}),(0,d.jsx)("label",{htmlFor:s+e.id,children:e.label})]},e.id)))})};const L=(0,i.memo)((()=>{const{productData:e,setProductData:t}=x(),s=Object.values(e.variants),r=[],c=[];s.forEach((e=>{const t=e.options[1];r.push({...t,id:0}),c.push(Object.keys(e.options).length)}));const[n,o]=(0,i.useState)(r),l=(e,t)=>{o((s=>{const i=[...s];return i[e]=t,i}))};return(0,i.useEffect)((()=>{const e=function(e,t){let s=0,i=1;for(let r=e.length-1;r>=0;r--)s+=e[r].id*i,i*=t[r];return s}(n,c);t((t=>({...t,price:t.pricesAndImagesList[e].price,originalPrice:t.pricesAndImagesList[e].originalPrice,combinationIndex:e})))}),[n]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"d-flex flex-column gap-1",children:s.map(((e,t)=>{if("dropdown"===e.type)return(0,d.jsxs)("div",{className:"input-container",children:[(0,d.jsx)("h4",{children:(0,a.Zr)(e.name)}),(0,d.jsx)("div",{className:"col-6 px-1 my-2",children:(0,d.jsx)(D.A,{keyExtractor:e=>e.id,options:Object.values(e.options).map(((e,t)=>({...e,id:t}))),setSelectedOption:e=>l(t,e),selectedOption:n[t]})})]},t);if("radio-button"===e.type){const s=n[t];return(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{children:(0,a.Zr)(e.name)}),(0,d.jsx)("div",{className:"m-2 px-1",children:(0,d.jsx)(P,{name:(0,a.Zr)(e.name),options:Object.values(e.options).map(((e,t)=>({...e,id:t}))),selectedRadioOption:s,setSelectedRadioOption:e=>l(t,e)})})]},t)}if("text-button"===e.type){const s=n[t];return(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{children:(0,a.Zr)(e.name)}),(0,d.jsx)("div",{className:"my-2 px-1",children:(0,d.jsx)(O,{options:Object.values(e.options).map(((e,t)=>({...e,id:t}))),setSelectedTextOption:e=>l(t,e),selectedTextOption:s})})]},t)}if("colored-square"===e.type){const s=n[t];return(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{children:[(0,a.Zr)(e.name),": ",(0,d.jsx)("span",{className:"color-primary",children:s.label})]}),(0,d.jsx)("div",{className:"my-2 px-1",children:(0,d.jsx)(E,{options:Object.values(e.options).map(((e,t)=>({...e,id:t}))),setSelectedCCOption:e=>l(t,e),selectedCCOption:s})})]},t)}if("image-with-text"===e.type){const s=n[t];return(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{children:[(0,a.Zr)(e.name),": ",(0,d.jsx)("span",{className:"color-primary",children:s.label})]}),(0,d.jsx)("div",{className:"my-2 px-1",children:(0,d.jsx)(N,{options:Object.values(e.options).map(((e,t)=>({...e,id:t}))),setSelectedImageOption:e=>l(t,e),selectedImageOption:s})})]},t)}}))})})}));var R=s(6214);const A=(0,i.memo)((()=>{const{productData:e}=x();return(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:{lineHeight:1.2},children:[(0,a.Zr)(e.title),e.discount&&(0,d.jsx)("span",{children:(0,d.jsx)("span",{style:{backgroundColor:"var(--primary-color)",color:"var(--background-color)",padding:"0 6px",margin:"0 8px",fontSize:14,whiteSpace:"nowrap",borderRadius:"var(--border-radius-2)"},children:e.discount})})]}),e.miniDescription&&(0,d.jsx)("p",{style:{lineHeight:1.4,marginTop:8},children:e.miniDescription}),(0,d.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[e.price?(0,d.jsxs)("h2",{className:"number",style:{color:"var(--primary-color)"},children:[e.price," ",(0,a.cv)("DA")]}):"",e.originalPrice?(0,d.jsxs)("h3",{className:"old-price",children:[e.originalPrice," ",(0,a.cv)("DA")]}):"",!e.price&&!e.originalPrice&&(0,d.jsx)("h3",{style:{color:"red"},children:(0,a.cv)("No price available !")})]})]})}));var B=s(5475);const Z=e=>{let{product:t}=e;const{storeData:s}=(0,l.o)();return(0,d.jsxs)(B.N_,{style:{border:"1px solid var(--border-color)",display:"flex",flexDirection:"column",borderRadius:"var(--border-radius-2)"},className:"hover-scale",to:"/redirect?redirect=/products/".concat(t.slug,"/").concat(t.id),children:[(0,d.jsx)(b,{src:t.image||s.logo,style:{width:150,height:151,borderBottom:"1px solid var(--border-color)",objectFit:"cover"}}),(0,d.jsxs)("div",{className:"px-2",children:[(0,d.jsx)("h4",{className:"cut-text",children:t.title}),(0,d.jsxs)("div",{className:"d-flex gap-2",children:[(0,d.jsxs)("h5",{className:"color-primary",children:[t.price||0," ",(0,a.cv)("DA")]}),t.originalPrice&&(0,d.jsxs)("h5",{className:"old-price",children:[t.originalPrice," ",(0,a.cv)("DA")]})]})]})]})};var H=s(4113);const z=()=>{const[e,t]=(0,i.useState)(null),{productData:s}=x(),[c,n]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{(async()=>{try{const e=await fetch(r.y0+"/product/get-related-products?product_id="+s.productId,{});if(!e.ok)return console.log("Error: ".concat(e.status," ").concat(e.statusText)),void n(!1);t(await e.json()),n(!1)}catch(e){console.log(e),n(!1)}})()}),[]),(0,d.jsxs)("div",{className:"d-flex flex-wrap gap-2 p-2 justify-content-center col-12",children:[!c&&e&&e.map((e=>(0,d.jsx)(Z,{product:e},e.index))),c&&(0,d.jsx)(H.A,{diam:160,color:"var(--primary-color)"})]})},F=()=>{const{productData:e}=x();return(0,d.jsxs)("div",{className:"d-flex ",children:[(0,d.jsxs)("div",{className:"col-12 col-md-6 p-1",children:[(0,d.jsx)(d.Fragment,{children:e.galleryImages.length>0&&(0,d.jsx)("div",{style:{top:8,borderRadius:"var(--border-radius-3)",overflow:"hidden"},className:"p-sticky-md border",id:"image-slider__container",children:(0,d.jsx)(g,{})})}),(0,d.jsx)(d.Fragment,{children:0===e.galleryImages.length&&(0,d.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{border:"1px solid var(--border-color)",aspectRatio:1,maxWidth:"100%",maxHeight:"calc(100vh - 80px)",margin:"auto"},children:(0,d.jsx)("h3",{style:{color:"grey"},children:(0,a.cv)("No image was provider")})})})]}),(0,d.jsxs)("div",{className:"col-12 col-md-6 px-2 px-lg-4 d-flex flex-column gap-1 p-1 mt-3",children:[" ",(0,d.jsx)(A,{}),e.pricesAndImagesList.length>0&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(L,{})}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)(R.A,{productData:e})}),e.richText&&(0,d.jsx)(h,{className:"p-1 my-4 sun-editor-editable",dangerouslySetInnerHTML:{__html:e.richText}})]}),(0,d.jsxs)(h,{className:"flex-1",children:[(0,d.jsx)("hr",{className:"my-3 border"}),(0,d.jsx)(z,{})]})]})},M=()=>{const{id:e}=(0,c.g)();return(0,i.useEffect)((()=>{fetch(r.y0+"/product/increment-product-views",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({product_id:e})})}),[]),(0,d.jsx)(p,{children:(0,d.jsx)(F,{})})}}}]);
//# sourceMappingURL=801.5df80dab.chunk.js.map